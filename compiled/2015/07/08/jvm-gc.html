<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>jvm——gc</title>
  
    <meta name="author" content="tiemei">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="/assets/twitter/stylesheets/bootstrap.min.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/stylesheets/style.css" type="text/css" rel="stylesheet" media="all">
<link href="/assets/twitter/widgets/google_prettify/stylesheets/twitter-bootstrap.css" type="text/css" rel="stylesheet" media="all">
 

    <!-- Le fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->
  </head>

  <body>

    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="brand" href="/">顽固的卡夫卡</a>
          <ul class="nav">
            
              


  <li><a href="/">关于我</a></li>


            
              


  <li><a href="/archive">技术博客</a></li>


            
              


  <li><a href="/categories">分类</a></li>


            
              


  <li><a href="/poems">其他博客</a></li>


            
            <!--
            <li>
              <a href="poems">其他博客</a>
            </li>
            -->
          </ul>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="content">
        <div class="page-header">
  <h1>jvm——gc </h1>
</div>

<div class="row">
  <div class="span8">
    <h2><a style="display: block;" name="几种常见的垃圾回收算法" href="#几种常见的垃圾回收算法"></a>几种常见的垃圾回收算法</h2>

<h3>引用计数法(Reference Counting Collector)</h3>

<p><img src="https://farm1.staticflickr.com/542/18944422264_f6d3a376ce.jpg" alt="Reference Counting Collector" />
</p>

<p>堆中每个对象维护一个引用计数，一个对象被创建后，每一个新的引用执行这个对象，引用计数+1；每减少一个新的引用，或者原来的引用超过了生命周期，引用计数-1；当一个引用计数为0的对象被垃圾回收，它所有引用的所有对象的计数-1。<br />
缺点是，有些独立的引用环没法回收。此时需要额外的方式来回收，比如“弱引用”，比如特殊的算法回收引用环。Perl，Python，PHP就是使用类似的算法来回收引用环。<br />
优点是，执行快，不需要打断应用程序执行。</p>

<h3>tracing算法(Tracing Collector) 或 标记-清除算法(mark and sweep)</h3>

<p><img src="https://farm1.staticflickr.com/313/19380455499_60b373cbf7.jpg" alt="mark and sweep" />
</p>

<p>从根节点开始扫描可达对象，称为标记；将不可达对象删除，称为清理；因为清理会产生内存碎片，所以需要额外的整理动作（compacting）。<br />
java中可作为GC Root的对象有：<br />
1.虚拟机栈中引用的对象（本地变量表）
2.方法区中静态属性引用的对象
3. 方法区中常量引用的对象
4.本地方法栈中引用的对象（Native对象）</p>

<h3>copying算法(Compacting Collector)</h3>

<p>将内存分成两块，从root开始找到所有可达对象，拷贝到空闲区，然后清理当前使用区。一般需要暂停应用程序执行。<br />
这个算法可以作为标记-清楚算法的补充。</p>

<h3>generation算法(Generational Collector)</h3>

<p><img src="https://farm1.staticflickr.com/286/19571763781_69ca22ff15.jpg" alt="generation" />
</p>

<p>术语解释：</p>

<blockquote>
<p>分代<br />
Young Generation：eden区，两个survivor(survivor0,survivor1)区，容量比约为8:1:1。<br />
Old Generation（Tenured Space）<br />
Permanent Generation</p>

<p>gc种类<br />
Young GC (Minor GC/ygc)<br />
Full GC (Major GC/fgc)</p>
</blockquote>

<p>大部分对象在Eden区生成，ygc将Eden区可达对象复制到survivor0，并清空Eden区。当survivor0满了，ygc时将Eden区、survivor0区可达对象复制到</p>

<h2><a style="display: block;" name="几种常见垃圾收集器" href="#几种常见垃圾收集器"></a>几种常见垃圾收集器</h2>

<h2><a style="display: block;" name="gc日志实例分析" href="#gc日志实例分析"></a>gc日志实例分析</h2>

<h2><a style="display: block;" name="待解决问题" href="#待解决问题"></a>待解决问题</h2>

<ol>
<li>新生代触发young gc的条件？</li>
<li></li>
</ol>

<p>主要参考：<br />
<a href="http://www.cnblogs.com/sunniest/p/4575144.html">深入理解java垃圾回收机制</a><br />
[]()</p>

<p><a href="http://www.searchtb.com/2013/07/jvm-gc-introduction-examples.html">淘宝搜索-JVM GC简介和实例</a><br />
<a href="https://blogs.oracle.com/poonam/entry/understanding_cms_gc_logs">https://blogs.oracle.com/poonam/entry/understanding_cms_gc_logs</a>
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/cms.html">https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/cms.html</a></p>

<p><a href="http://coderbee.net/index.php/jvm/20131216/646">gc日志分析</a>
<a href="http://ifeve.com/useful-jvm-flags-part-8-gc-logging/">JVM实用参数（八）GC日志</a></p>

<p><a href="http://it.deepinmind.com/gc/2014/09/12/garbage-collectors-serial-vs-parallel-vs-cms-vs-the-g1-and-whats-new-in-java-8.html">不同的垃圾回收器的比较</a><br />
<a href="http://blog.hesey.net/2014/05/swap-impact-on-rt-sensitive-apps.html?utm_source=rss&amp;utm_medium=rss&amp;utm_campaign=swap-impact-on-rt-sensitive-apps">Swap对响应时间敏感应用的影响</a><br />
<a href="http://it.deepinmind.com/gc/2015/03/03/minor-gc-vs-major-gc-vs-full-gc.html">full gc是否真的存在</a><br />
<a href="http://www.searchtb.com/2013/07/jvm-gc-introduction-examples.html">JVM的GC简介和实例</a><br />
<a href="http://blog.hesey.net/2013/11/cms-gc-optimize.html">一次CMS GC的调优工作</a>
<a href="http://blog.csdn.net/iter_zc/article/details/41825395">聊聊JVM（四）深入理解Major GC, Full GC, CMS</a><br />
<a href="http://ifeve.com/jvm-troubleshooting-guide-4/">《JVM故障诊断指南》之4 —— Java 8:从持久代到metaspace</a><br />
<a href="http://ifeve.com/useful-jvm-flags-part-8-gc-logging/">JVM实用参数（八）GC日志</a></p>

<p>系列文章：<br />
<a href="http://it.deepinmind.com/categories.html#GC-ref">http://it.deepinmind.com/categories.html#GC-ref</a></p>

    <hr>
    <div class="pagination">
      <ul>
        <ul>
          
            <li class="prev"><a href="/2015/07/10/osx-createinstallmedia.html" title="osx-制作USA安装盘，并迁移老MAC">&larr; Previous</a></li>
          
          

            <li><a href="/archive">Archive</a></li>

          
            <li class="next"><a href="/2015/07/08/jvm-jmm.html" title="JVM——JMM，java内存模型">Next &rarr;</a></li>
          
          
        </ul>
      </ul>
    </div>
    <hr>
    
<div id="disqus_thread"></div>
<script>
    var disqus_developer = 1;
    var disqus_shortname = 'jekyllbootstrap'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

  </div>
  
  <div class="span4">
    <h4>Published</h4>
    <div class="date"><span>2015-07-08</span></div>
    <br>
    <h4>Categories</h4>
    <ul class="tag_box">
    
      <li>
  <a href="/categories/#java-ref">java <span>15</span></a>
</li>
    
    </ul>
    <br>
    <h4>Tags</h4>
    <ul class="tag_box">
    
    </ul>
  </div>
</div>

      </div>

      <footer>
        <p>&copy; tiemei 2013 
          with help from <a href="http://github.com/wendal/gor" target="_blank" title="Gor -- Fast Blog">Gor</a>
          and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>
		  and Idea from <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
        </p>
      </footer>

    </div> <!-- /container -->

    
<script src="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>

    
<script>
    var _gaq=[['_setAccount','UA-123-12'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
    <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5379369'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s9.cnzz.com/stat.php%3Fid%3D5379369%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script>
  </body>
</html>
